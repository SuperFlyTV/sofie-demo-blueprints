"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[846],{2532(e,t,s){s.r(t),s.d(t,{assets:()=>h,contentTitle:()=>l,default:()=>y,frontMatter:()=>d,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"piece_types/creating_piece_types","title":"Creating Piece Types","description":"In this guide you\'ll learn how we extended the graphics piece to add a stepped graphic piece to the blueprints which also covers the basics of adding a new piece type.","source":"@site/docs/piece_types/creating_piece_types.md","sourceDirName":"piece_types","slug":"/piece_types/creating_piece_types","permalink":"/sofie-demo-blueprints/docs/piece_types/creating_piece_types","draft":false,"unlisted":false,"editUrl":"https://github.com/SuperFlyTV/sofie-demo-blueprints/tree/docs/docusaurus/packages/docs/docs/docs/piece_types/creating_piece_types.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Piece Types","permalink":"/sofie-demo-blueprints/docs/piece_types/"},"next":{"title":"AdLibs","permalink":"/sofie-demo-blueprints/docs/adlibs/"}}');var i=s(1085),c=s(1184);const r=s.p+"assets/images/ObjectType-0f643cdecc288d4582b47ed9752486be.png",p=s.p+"assets/images/AcceptNewType-47a55beda72097cdbb1f812ee90689c1.png",o=s.p+"assets/images/AcceptNewTypeInPart-b443c92228e6b185db62c0c444de1725.png",a=s.p+"assets/images/ParseGraphic-cbf6a58db72c9dcde3e97210a73d254c.png",d={},l="Creating Piece Types",h={},u=[{value:"Create a new ObjectType in the blueprints",id:"create-a-new-objecttype-in-the-blueprints",level:2},{value:"Proof of concept parsing in the blueprints:",id:"proof-of-concept-parsing-in-the-blueprints",level:2}];function b(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"creating-piece-types",children:"Creating Piece Types"})}),"\n",(0,i.jsx)(t.p,{children:"In this guide you'll learn how we extended the graphics piece to add a stepped graphic piece to the blueprints which also covers the basics of adding a new piece type."}),"\n",(0,i.jsx)(t.p,{children:"By reading this guide and following the code you will be able to understand how the pieces are parsed by the blueprints in Sofie and allow you to create your own pieces.xs"}),"\n",(0,i.jsx)(t.h2,{id:"create-a-new-objecttype-in-the-blueprints",children:"Create a new ObjectType in the blueprints"}),"\n",(0,i.jsxs)(t.p,{children:["In ",(0,i.jsx)(t.code,{children:"packages\\blueprints\\src\\common\\definitions\\objects.ts"})," create a new ",(0,i.jsx)(t.code,{children:"ObjectType"})," in the ",(0,i.jsx)(t.code,{children:"ObjectType"})," enum:"]}),"\n",(0,i.jsx)("img",{src:r}),"\n",(0,i.jsx)(t.h2,{id:"proof-of-concept-parsing-in-the-blueprints",children:"Proof of concept parsing in the blueprints:"}),"\n",(0,i.jsx)(t.p,{children:"We essentially treat the stepped graphic as a sub-type of a Graphic object for the purposes of this example."}),"\n",(0,i.jsx)(t.p,{children:"For this to work we first need to accept it as a valid graphic object so it can be parsed correctly in a Graphics part."}),"\n",(0,i.jsx)("img",{src:p}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"packages\\blueprints\\src\\base\\showstyle\\sofie-editor-parsers\\index.ts"})}),"\n",(0,i.jsx)(t.p,{children:"We now have to also accept it during the parsing of the part:"}),"\n",(0,i.jsx)("img",{src:o}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"packages\\blueprints\\src\\base\\showstyle\\sofie-editor-parsers\\gfx.ts"})}),"\n",(0,i.jsxs)(t.p,{children:["Create simple types, we only have a ",(0,i.jsx)(t.code,{children:"stepCount"})," property here because of the Rundown Editor's limitations. Ideally we'd ingest a ",(0,i.jsx)(t.code,{children:"NoraContentSteps"})," as a step property that is already defined in Sofie so if you want to implement stepped graphics we suggest looking into that."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"export interface GraphicObjectBase extends BaseObject {\n\tobjectType: ObjectType.Graphic | ObjectType.SteppedGraphic\n\tadlibVariant?: string\n}\nexport interface SteppedGraphicObject extends GraphicObjectBase {\n\tobjectType: ObjectType.SteppedGraphic\n\tattributes: SteppedGraphicObjectAttributes\n}\nexport interface SteppedGraphicObjectAttributes extends GraphicObjectAttributes {\n\tstepCount: number\n\t[key: string]: string | number | boolean | undefined\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"packages\\blueprints\\src\\common\\definitions\\objects.ts"})}),"\n",(0,i.jsx)(t.p,{children:"Finally for the Sofie UI to render it as a stepped piece we need to return a piece with a step property on it's contents."}),"\n",(0,i.jsx)(t.p,{children:"This can be skipped if you don't need to show steps for your pieces."}),"\n",(0,i.jsxs)(t.p,{children:["Here the step property has to be the type of ",(0,i.jsx)(t.code,{children:"NoraContentSteps"}),". The content of your pieces could also differ based on your use-case."]}),"\n",(0,i.jsx)("img",{src:a}),"\n",(0,i.jsx)(t.p,{children:"packages\\blueprints\\src\\base\\showstyle\\helpers\\graphics.ts"})]})}function y(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}},1184(e,t,s){s.d(t,{R:()=>r,x:()=>p});var n=s(4041);const i={},c=n.createContext(i);function r(e){const t=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function p(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);